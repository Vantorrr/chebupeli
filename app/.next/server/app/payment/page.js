(()=>{var e={};e.id=790,e.ids=[790],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5158:e=>{"use strict";e.exports=require("http2")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},7756:()=>{},2964:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=t(482),a=t(9108),l=t(2563),n=t.n(l),i=t(8300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d=["",{children:["payment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,903)),"/Users/pavelgalante/airalo/app/app/payment/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9650)),"/Users/pavelgalante/airalo/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/pavelgalante/airalo/app/app/payment/page.tsx"],x="/payment/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/payment/page",pathname:"/payment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5150:(e,s,t)=>{Promise.resolve().then(t.bind(t,6749)),Promise.resolve().then(t.t.bind(t,2704,23))},3684:(e,s,t)=>{Promise.resolve().then(t.bind(t,2362))},1415:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},2362:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(5344),a=t(3729),l=t(2254),n=t(6749),i=t(4337),o=t(1934);function d(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)(),{webApp:t}=(0,n.useTelegram)(),[d,c]=(0,a.useState)(null),[x,m]=(0,a.useState)(!1),[u,p]=(0,a.useState)(null),[h,g]=(0,a.useState)("pending"),[b,v]=(0,a.useState)(null);(0,a.useEffect)(()=>{t&&(t.ready(),t.expand(),t.BackButton.show(),t.BackButton.onClick(()=>e.push("/tariffs")));let r=s?.get("tariffId");return r&&j(r),()=>{t&&t.BackButton.hide()}},[t,e,s]);let j=async e=>{c({id:e,country:"Турция",dataGB:5,days:30,type:"Standard",price:990})},y=async e=>{if(!x){t?t.showAlert("Необходимо согласиться с условиями Оферты и Политики конфиденциальности"):alert("Необходимо согласиться с условиями Оферты и Политики конфиденциальности");return}p(e);try{let s=await o.Z.post("/api/payment/create",{tariffId:d.id,method:e,amount:d.price});s.data.paymentUrl?window.location.href=s.data.paymentUrl:setTimeout(()=>{g("success"),v({qrCode:"LPA:1$your-provider.com$activation-code-here",activationCode:"SM-DP+ Address: your-provider.com\nActivation Code: ABC123XYZ"})},2e3)}catch(e){console.error("Ошибка оплаты:",e),g("failed")}};return d?"success"===h&&b?r.jsx("div",{className:"min-h-screen bg-white p-6",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-3xl",children:"✓"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Оплата успешна!"}),r.jsx("p",{className:"text-gray-600",children:"Ваш eSIM готов к использованию"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 mb-6",children:[r.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Инструкция по установке:"}),b.qrCode&&(0,r.jsxs)("div",{className:"mb-6",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Отсканируйте QR-код:"}),r.jsx("div",{className:"bg-white p-4 rounded-lg flex justify-center",children:r.jsx(i.ZP,{value:b.qrCode,size:200})})]}),b.activationCode&&(0,r.jsxs)("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Или используйте код активации:"}),r.jsx("div",{className:"bg-white p-4 rounded-lg",children:r.jsx("p",{className:"text-sm font-mono break-all",children:b.activationCode})})]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[r.jsx("p",{children:"1. Откройте Настройки → Сотовая связь"}),r.jsx("p",{children:"2. Нажмите \xabДобавить сотовый тариф\xbb"}),r.jsx("p",{children:"3. Отсканируйте QR-код или введите код вручную"}),r.jsx("p",{children:"4. Следуйте инструкциям на экране"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>e.push("/my-esims"),className:"w-full bg-velaro-gradient text-white py-4 px-6 rounded-xl font-semibold text-lg",children:"Мои eSIM"}),r.jsx("button",{onClick:()=>e.push("/"),className:"w-full bg-gray-100 text-gray-700 py-4 px-6 rounded-xl font-semibold text-lg",children:"На главную"})]})]})}):"failed"===h?r.jsx("div",{className:"min-h-screen bg-white p-6",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("span",{className:"text-3xl",children:"✕"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ошибка оплаты"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Попробуйте еще раз или выберите другой способ оплаты"}),r.jsx("button",{onClick:()=>g("pending"),className:"w-full bg-velaro-gradient text-white py-4 px-6 rounded-xl font-semibold text-lg",children:"Попробовать снова"})]})}):r.jsx("div",{className:"min-h-screen bg-white p-6",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto",children:[r.jsx("h1",{className:"text-2xl font-bold gradient-text text-center mb-6",children:"Оплата"}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-xl p-5 mb-6",children:[r.jsx("h3",{className:"font-semibold text-lg mb-3",children:d.country}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Данные:"}),(0,r.jsxs)("span",{className:"font-semibold",children:[d.dataGB," GB"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Срок:"}),(0,r.jsxs)("span",{className:"font-semibold",children:[d.days," дней"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Тип:"}),r.jsx("span",{className:"font-semibold",children:d.type})]}),r.jsx("div",{className:"border-t border-gray-300 pt-2 mt-2",children:(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-lg font-bold",children:"Итого:"}),(0,r.jsxs)("span",{className:"text-2xl font-bold text-velaro-orange",children:[d.price," ₽"]})]})})]})]}),r.jsx("div",{className:"mb-6",children:(0,r.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:x,onChange:e=>m(e.target.checked),className:"mt-1 w-5 h-5 text-velaro-orange border-gray-300 rounded focus:ring-velaro-orange"}),(0,r.jsxs)("span",{className:"text-sm text-gray-700",children:["Покупая пакет, вы соглашаетесь с условиями"," ",r.jsx("a",{href:"/offer",className:"text-velaro-orange underline",children:"Оферты"})," и"," ",r.jsx("a",{href:"/privacy",className:"text-velaro-orange underline",children:"Политики конфиденциальности"})," Velaro."]})]})}),(0,r.jsxs)("div",{className:"space-y-3 mb-6",children:[r.jsx("button",{onClick:()=>y("tinkoff"),disabled:!x||null!==u,className:"w-full bg-white border-2 border-gray-300 hover:border-velaro-orange py-4 px-6 rounded-xl font-semibold text-lg transition-smooth disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83D\uDCB3 Тинькофф"}),r.jsx("button",{onClick:()=>y("yookassa"),disabled:!x||null!==u,className:"w-full bg-white border-2 border-gray-300 hover:border-velaro-orange py-4 px-6 rounded-xl font-semibold text-lg transition-smooth disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83D\uDCB3 ЮKassa"}),r.jsx("button",{onClick:()=>y("cloudpayments"),disabled:!x||null!==u,className:"w-full bg-white border-2 border-gray-300 hover:border-velaro-orange py-4 px-6 rounded-xl font-semibold text-lg transition-smooth disabled:opacity-50 disabled:cursor-not-allowed",children:"\uD83D\uDCB3 CloudPayments"})]}),u&&(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-velaro-orange mx-auto mb-2"}),r.jsx("p",{className:"text-gray-600",children:"Обработка платежа..."})]})]})}):r.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-velaro-orange mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Загрузка..."})]})})}},6749:(e,s,t)=>{"use strict";t.r(s),t.d(s,{TelegramProvider:()=>n,useTelegram:()=>i});var r=t(5344),a=t(3729);let l=(0,a.createContext)({webApp:null});function n({children:e}){let[s,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>{},[]),r.jsx(l.Provider,{value:{webApp:s},children:e})}function i(){return(0,a.useContext)(l)}},9650:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m,metadata:()=>x});var r=t(5036);t(7272);var a=t(6843);let l=(0,a.createProxy)(String.raw`/Users/pavelgalante/airalo/app/components/TelegramProvider.tsx`),{__esModule:n,$$typeof:i}=l;l.default;let o=(0,a.createProxy)(String.raw`/Users/pavelgalante/airalo/app/components/TelegramProvider.tsx#TelegramProvider`);(0,a.createProxy)(String.raw`/Users/pavelgalante/airalo/app/components/TelegramProvider.tsx#useTelegram`);var d=t(4825),c=t.n(d);let x={title:"Velaro - Цифровые интернет-пакеты для путешествий",description:"Velaro — цифровые интернет-пакеты для путешествий"};function m({children:e}){return r.jsx("html",{lang:"ru",children:(0,r.jsxs)("body",{children:[r.jsx(c(),{src:"https://telegram.org/js/telegram-web-app.js",strategy:"beforeInteractive"}),r.jsx(o,{children:e})]})})}},903:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>l,__esModule:()=>a,default:()=>n});let r=(0,t(6843).createProxy)(String.raw`/Users/pavelgalante/airalo/app/app/payment/page.tsx`),{__esModule:a,$$typeof:l}=r,n=r.default},7272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[768,42,337],()=>t(2964));module.exports=r})();